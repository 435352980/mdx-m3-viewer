<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: math.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: math.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

  * Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
  * Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */
(function(J){var H;"undefined"===typeof exports?"function"==typeof define&amp;&amp;"object"==typeof define.amd&amp;&amp;define.amd?(H={},define(function(){return H})):H="undefined"!==typeof window?window:J:H=exports;(function(y){if(!H)var H=1E-6;if(!v)var v="undefined"!==typeof Float32Array?Float32Array:Array;if(!F)var F=Math.random;var w={setMatrixArrayType:function(a){v=a}};"undefined"!==typeof y&amp;&amp;(y.glMatrix=w);var J=Math.PI/180;w.toRadian=function(a){return a*J};var r={create:function(){var a=new v(2);a[0]=0; a[1]=0;return a},clone:function(a){var b=new v(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var c=new v(2);c[0]=a;c[1]=b;return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}};r.sub=r.subtract;r.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a};r.mul=r.multiply;r.divide=function(a,b,c){a[0]=b[0]/c[0]; a[1]=b[1]/c[1];return a};r.div=r.divide;r.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};r.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};r.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};r.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;return a};r.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)};r.dist=r.distance;r.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c* c+d*d};r.sqrDist=r.squaredDistance;r.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};r.len=r.length;r.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};r.sqrLen=r.squaredLength;r.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};r.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0&lt;c&amp;&amp;(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};r.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};r.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};r.lerp=function(a, b,c,d){var e=b[0];b=b[1];a[0]=e+d*(c[0]-e);a[1]=b+d*(c[1]-b);return a};r.random=function(a,b){b=b||1;var c=2*F()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};r.transformMat2=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a};r.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a};r.transformMat3=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};r.transformMat4=function(a, b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};r.forEach=function(){var a=r.create();return function(b,c,d,e,f,g){c||(c=2);d||(d=0);for(e=e?Math.min(e*c+d,b.length):b.length;d&lt;e;d+=c)a[0]=b[d],a[1]=b[d+1],f(a,a,g),b[d]=a[0],b[d+1]=a[1];return b}}();r.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};"undefined"!==typeof y&amp;&amp;(y.vec2=r);var q={create:function(){var a=new v(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new v(3);b[0]=a[0];b[1]=a[1];b[2]= a[2];return b},fromValues:function(a,b,c){var d=new v(3);d[0]=a;d[1]=b;d[2]=c;return d},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}};q.sub=q.subtract;q.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a};q.mul=q.multiply;q.divide=function(a,b,c){a[0]= b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a};q.div=q.divide;q.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a};q.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};q.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a};q.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;return a};q.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]- a[2];return Math.sqrt(c*c+d*d+e*e)};q.dist=q.distance;q.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};q.normalize= function(a,b){var c=b[0],d=b[1],e=b[2],c=c*c+d*d+e*e;0&lt;c&amp;&amp;(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};q.cross=function(a,b,c){var d=b[0],e=b[1];b=b[2];var f=c[0],g=c[1];c=c[2];a[0]=e*c-b*g;a[1]=b*f-d*c;a[2]=d*g-e*f;return a};q.lerp=function(a,b,c,d){var e=b[0],f=b[1];b=b[2];a[0]=e+d*(c[0]-e);a[1]=f+d*(c[1]-f);a[2]=b+d*(c[2]-b);return a};q.random=function(a,b){b=b||1;var c=2*F()*Math.PI,d=2*F()-1,e=Math.sqrt(1-d*d)*b;a[0]= Math.cos(c)*e;a[1]=Math.sin(c)*e;a[2]=d*b;return a};q.transformMat4=function(a,b,c){var d=b[0],e=b[1];b=b[2];a[0]=c[0]*d+c[4]*e+c[8]*b+c[12];a[1]=c[1]*d+c[5]*e+c[9]*b+c[13];a[2]=c[2]*d+c[6]*e+c[10]*b+c[14];return a};q.transformMat3=function(a,b,c){var d=b[0],e=b[1];b=b[2];a[0]=d*c[0]+e*c[3]+b*c[6];a[1]=d*c[1]+e*c[4]+b*c[7];a[2]=d*c[2]+e*c[5]+b*c[8];return a};q.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=c[0];var g=c[1],h=c[2];c=c[3];var k=c*d+g*f-h*e,l=c*e+h*d-b*f,n=c*f+b*e-g*d,d=-b* d-g*e-h*f;a[0]=k*c+d*-b+l*-h-n*-g;a[1]=l*c+d*-g+n*-b-k*-h;a[2]=n*c+d*-h+k*-g-l*-b;return a};q.rotateX=function(a,b,c,d){var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[0];f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d);f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d);a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a};q.rotateY=function(a,b,c,d){var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d);f[1]=e[1];f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d);a[0]= f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a};q.rotateZ=function(a,b,c,d){var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d);f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d);f[2]=e[2];a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a};q.forEach=function(){var a=q.create();return function(b,c,d,e,f,g){c||(c=3);d||(d=0);for(e=e?Math.min(e*c+d,b.length):b.length;d&lt;e;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],f(a,a,g),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2];return b}}(); q.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};"undefined"!==typeof y&amp;&amp;(y.vec3=q);var p={create:function(){var a=new v(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new v(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,c,d){var e=new v(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e;return a},add:function(a,b,c){a[0]=b[0]+ c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a}};p.sub=p.subtract;p.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];a[3]=b[3]*c[3];return a};p.mul=p.multiply;p.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];a[3]=b[3]/c[3];return a};p.div=p.divide;p.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);a[3]=Math.min(b[3], c[3]);return a};p.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);a[3]=Math.max(b[3],c[3]);return a};p.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;return a};p.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;return a};p.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)};p.dist=p.distance;p.squaredDistance=function(a,b){var c= b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f};p.sqrDist=p.squaredDistance;p.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};p.len=p.length;p.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a};p.sqrLen=p.squaredLength;p.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};p.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],c=c*c+d*d+e*e+f*f;0&lt;c&amp;&amp;(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]= b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c);return a};p.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};p.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];b=b[3];a[0]=e+d*(c[0]-e);a[1]=f+d*(c[1]-f);a[2]=g+d*(c[2]-g);a[3]=b+d*(c[3]-b);return a};p.random=function(a,b){b=b||1;a[0]=F();a[1]=F();a[2]=F();a[3]=F();p.normalize(a,a);p.scale(a,a,b);return a};p.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*b;a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*b;a[2]=c[2]*d+ c[6]*e+c[10]*f+c[14]*b;a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*b;return a};p.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=c[0];var g=c[1],h=c[2];c=c[3];var k=c*d+g*f-h*e,l=c*e+h*d-b*f,n=c*f+b*e-g*d,d=-b*d-g*e-h*f;a[0]=k*c+d*-b+l*-h-n*-g;a[1]=l*c+d*-g+n*-b-k*-h;a[2]=n*c+d*-h+k*-g-l*-b;return a};p.forEach=function(){var a=p.create();return function(b,c,d,e,f,g){c||(c=4);d||(d=0);for(e=e?Math.min(e*c+d,b.length):b.length;d&lt;e;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],a[3]=b[d+3],f(a,a,g),b[d]=a[0], b[d+1]=a[1],b[d+2]=a[2],b[d+3]=a[3];return b}}();p.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof y&amp;&amp;(y.vec4=p);w={create:function(){var a=new v(4);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},clone:function(a){var b=new v(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(a===b){var c=b[1];a[1]=b[2];a[2]= c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;if(!g)return null;g=1/g;a[0]=f*g;a[1]=-d*g;a[2]=-e*g;a[3]=c*g;return a},adjoint:function(a,b){var c=b[0];a[0]=b[3];a[1]=-b[1];a[2]=-b[2];a[3]=c;return a},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0],h=c[1],k=c[2];c=c[3];a[0]=d*g+f*h;a[1]=e*g+b*h;a[2]=d*k+f*c;a[3]=e*k+b*c;return a}};w.mul=w.multiply;w.rotate= function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+f*g;a[1]=e*c+b*g;a[2]=d*-g+f*c;a[3]=e*-g+b*c;return a};w.scale=function(a,b,c){var d=b[1],e=b[2],f=b[3],g=c[0];c=c[1];a[0]=b[0]*g;a[1]=d*g;a[2]=e*c;a[3]=f*c;return a};w.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};w.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};w.LDU=function(a,b,c,d){a[2]=d[2]/d[0];c[0]=d[0];c[1]=d[1];c[3]=d[3]- a[2]*c[1];return[a,b,c]};"undefined"!==typeof y&amp;&amp;(y.mat2=w);w={create:function(){var a=new v(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new v(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=c*f-d*e;if(!k)return null; k=1/k;a[0]=f*k;a[1]=-d*k;a[2]=-e*k;a[3]=c*k;a[4]=(e*h-f*g)*k;a[5]=(d*g-c*h)*k;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var k=c[0],l=c[1],n=c[2],m=c[3],u=c[4];c=c[5];a[0]=d*k+f*l;a[1]=e*k+g*l;a[2]=d*n+f*m;a[3]=e*n+g*m;a[4]=d*u+f*c+h;a[5]=e*u+g*c+b;return a}};w.mul=w.multiply;w.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var k=Math.sin(c);c=Math.cos(c);a[0]=d*c+f*k;a[1]=e*c+g*k;a[2]= d*-k+f*c;a[3]=e*-k+g*c;a[4]=h;a[5]=b;return a};w.scale=function(a,b,c){var d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=c[0];c=c[1];a[0]=b[0]*k;a[1]=d*k;a[2]=e*c;a[3]=f*c;a[4]=g;a[5]=h;return a};w.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var k=c[0];c=c[1];a[0]=d;a[1]=e;a[2]=f;a[3]=g;a[4]=d*k+f*c+h;a[5]=e*k+g*c+b;return a};w.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};w.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1], 2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};"undefined"!==typeof y&amp;&amp;(y.mat2d=w);var D={create:function(){var a=new v(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=new v(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},copy:function(a,b){a[0]= b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=d;a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7],n=b[8],m=n*g-h*l, u=-n*f+h*k,t=l*f-g*k,E=c*m+d*u+e*t;if(!E)return null;E=1/E;a[0]=m*E;a[1]=(-n*d+e*l)*E;a[2]=(h*d-e*g)*E;a[3]=u*E;a[4]=(n*c-e*k)*E;a[5]=(-h*c+e*f)*E;a[6]=t*E;a[7]=(-l*c+d*k)*E;a[8]=(g*c-d*f)*E;return a},adjoint:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7],n=b[8];a[0]=g*n-h*l;a[1]=e*l-d*n;a[2]=d*h-e*g;a[3]=h*k-f*n;a[4]=c*n-e*k;a[5]=e*f-c*h;a[6]=f*l-g*k;a[7]=d*k-c*l;a[8]=c*g-d*f;return a},determinant:function(a){var b=a[3],c=a[4],d=a[5],e=a[6],f=a[7],g=a[8];return a[0]*(g* c-d*f)+a[1]*(-g*b+d*e)+a[2]*(f*b-c*e)},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],n=b[7];b=b[8];var m=c[0],u=c[1],t=c[2],E=c[3],q=c[4],K=c[5],p=c[6],r=c[7];c=c[8];a[0]=m*d+u*g+t*l;a[1]=m*e+u*h+t*n;a[2]=m*f+u*k+t*b;a[3]=E*d+q*g+K*l;a[4]=E*e+q*h+K*n;a[5]=E*f+q*k+K*b;a[6]=p*d+r*g+c*l;a[7]=p*e+r*h+c*n;a[8]=p*f+r*k+c*b;return a}};D.mul=D.multiply;D.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],n=b[7];b=b[8];var m=c[0];c=c[1];a[0]=d;a[1]= e;a[2]=f;a[3]=g;a[4]=h;a[5]=k;a[6]=m*d+c*g+l;a[7]=m*e+c*h+n;a[8]=m*f+c*k+b;return a};D.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],n=b[7];b=b[8];var m=Math.sin(c);c=Math.cos(c);a[0]=c*d+m*g;a[1]=c*e+m*h;a[2]=c*f+m*k;a[3]=c*g-m*d;a[4]=c*h-m*e;a[5]=c*k-m*f;a[6]=l;a[7]=n;a[8]=b;return a};D.scale=function(a,b,c){var d=c[0];c=c[1];a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};D.fromMat2d=function(a,b){a[0]= b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};D.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,k=e+e,c=c*g,l=d*g,d=d*h,n=e*g,m=e*h,e=e*k,g=f*g,h=f*h,f=f*k;a[0]=1-d-e;a[3]=l-f;a[6]=n+h;a[1]=l+f;a[4]=1-c-e;a[7]=m-g;a[2]=n-h;a[5]=m+g;a[8]=1-c-d;return a};D.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7],n=b[8],m=b[9],u=b[10],t=b[11],E=b[12],q=b[13],p=b[14],r=b[15],s=c*h-d*g,B=c*k-e*g,x=c*l-f*g,z=d*k- e*h,v=d*l-f*h,w=e*l-f*k,y=n*q-m*E,A=n*p-u*E,n=n*r-t*E,I=m*p-u*q,m=m*r-t*q,u=u*r-t*p,t=s*u-B*m+x*I+z*n-v*A+w*y;if(!t)return null;t=1/t;a[0]=(h*u-k*m+l*I)*t;a[1]=(k*n-g*u-l*A)*t;a[2]=(g*m-h*n+l*y)*t;a[3]=(e*m-d*u-f*I)*t;a[4]=(c*u-e*n+f*A)*t;a[5]=(d*n-c*m-f*y)*t;a[6]=(q*w-p*v+r*z)*t;a[7]=(p*x-E*w-r*B)*t;a[8]=(E*v-q*x+r*s)*t;return a};D.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};D.frob=function(a){return Math.sqrt(Math.pow(a[0], 2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};"undefined"!==typeof y&amp;&amp;(y.mat3=D);var A={create:function(){var a=new v(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new v(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11]; b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4];a[2]= b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=f;a[11]=b[14];a[12]=e;a[13]=g;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7],n=b[8],m=b[9],u=b[10],t=b[11],q=b[12],p=b[13],r=b[14],s=b[15],C=c*h-d*g,B=c*k-e*g,x=c*l-f*g,z=d*k-e*h,v=d*l-f*h,w=e*l-f*k,y=n*p-m*q,A=n*r-u* q,I=n*s-t*q,D=m*r-u*p,H=m*s-t*p,F=u*s-t*r,G=C*F-B*H+x*D+z*I-v*A+w*y;if(!G)return null;G=1/G;a[0]=(h*F-k*H+l*D)*G;a[1]=(e*H-d*F-f*D)*G;a[2]=(p*w-r*v+s*z)*G;a[3]=(u*v-m*w-t*z)*G;a[4]=(k*I-g*F-l*A)*G;a[5]=(c*F-e*I+f*A)*G;a[6]=(r*x-q*w-s*B)*G;a[7]=(n*w-u*x+t*B)*G;a[8]=(g*H-h*I+l*y)*G;a[9]=(d*I-c*H-f*y)*G;a[10]=(q*v-p*x+s*C)*G;a[11]=(m*x-n*v-t*C)*G;a[12]=(h*A-g*D-k*y)*G;a[13]=(c*D-d*A+e*y)*G;a[14]=(p*B-q*z-r*C)*G;a[15]=(n*z-m*B+u*C)*G;return a},adjoint:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4], h=b[5],k=b[6],l=b[7],n=b[8],m=b[9],u=b[10],t=b[11],q=b[12],p=b[13],r=b[14],s=b[15];a[0]=h*(u*s-t*r)-m*(k*s-l*r)+p*(k*t-l*u);a[1]=-(d*(u*s-t*r)-m*(e*s-f*r)+p*(e*t-f*u));a[2]=d*(k*s-l*r)-h*(e*s-f*r)+p*(e*l-f*k);a[3]=-(d*(k*t-l*u)-h*(e*t-f*u)+m*(e*l-f*k));a[4]=-(g*(u*s-t*r)-n*(k*s-l*r)+q*(k*t-l*u));a[5]=c*(u*s-t*r)-n*(e*s-f*r)+q*(e*t-f*u);a[6]=-(c*(k*s-l*r)-g*(e*s-f*r)+q*(e*l-f*k));a[7]=c*(k*t-l*u)-g*(e*t-f*u)+n*(e*l-f*k);a[8]=g*(m*s-t*p)-n*(h*s-l*p)+q*(h*t-l*m);a[9]=-(c*(m*s-t*p)-n*(d*s-f*p)+q*(d*t- f*m));a[10]=c*(h*s-l*p)-g*(d*s-f*p)+q*(d*l-f*h);a[11]=-(c*(h*t-l*m)-g*(d*t-f*m)+n*(d*l-f*h));a[12]=-(g*(m*r-u*p)-n*(h*r-k*p)+q*(h*u-k*m));a[13]=c*(m*r-u*p)-n*(d*r-e*p)+q*(d*u-e*m);a[14]=-(c*(h*r-k*p)-g*(d*r-e*p)+q*(d*k-e*h));a[15]=c*(h*u-k*m)-g*(d*u-e*m)+n*(d*k-e*h);return a},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],l=a[8],n=a[9],m=a[10],p=a[11],q=a[12],r=a[13],s=a[14];a=a[15];return(b*g-c*f)*(m*a-p*s)-(b*h-d*f)*(n*a-p*r)+(b*k-e*f)*(n*s-m*r)+(c*h-d*g)*(l* a-p*q)-(c*k-e*g)*(l*s-m*q)+(d*k-e*h)*(l*r-n*q)},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],n=b[7],m=b[8],p=b[9],q=b[10],r=b[11],s=b[12],v=b[13],w=b[14];b=b[15];var C=c[0],B=c[1],x=c[2],z=c[3];a[0]=C*d+B*h+x*m+z*s;a[1]=C*e+B*k+x*p+z*v;a[2]=C*f+B*l+x*q+z*w;a[3]=C*g+B*n+x*r+z*b;C=c[4];B=c[5];x=c[6];z=c[7];a[4]=C*d+B*h+x*m+z*s;a[5]=C*e+B*k+x*p+z*v;a[6]=C*f+B*l+x*q+z*w;a[7]=C*g+B*n+x*r+z*b;C=c[8];B=c[9];x=c[10];z=c[11];a[8]=C*d+B*h+x*m+z*s;a[9]=C*e+B*k+x*p+z*v;a[10]= C*f+B*l+x*q+z*w;a[11]=C*g+B*n+x*r+z*b;C=c[12];B=c[13];x=c[14];z=c[15];a[12]=C*d+B*h+x*m+z*s;a[13]=C*e+B*k+x*p+z*v;a[14]=C*f+B*l+x*q+z*w;a[15]=C*g+B*n+x*r+z*b;return a}};A.mul=A.multiply;A.translate=function(a,b,c){var d=c[0],e=c[1];c=c[2];var f,g,h,k,l,n,m,p,q,r,s,v;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],g=b[1],h=b[2],k=b[3],l=b[4],n=b[5],m=b[6],p=b[7],q=b[8],r=b[9],s=b[10],v=b[11],a[0]= f,a[1]=g,a[2]=h,a[3]=k,a[4]=l,a[5]=n,a[6]=m,a[7]=p,a[8]=q,a[9]=r,a[10]=s,a[11]=v,a[12]=f*d+l*e+q*c+b[12],a[13]=g*d+n*e+r*c+b[13],a[14]=h*d+m*e+s*c+b[14],a[15]=k*d+p*e+v*c+b[15]);return a};A.scale=function(a,b,c){var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};A.rotate=function(a,b,c,d){var e=d[0],f=d[1];d=d[2];var g= Math.sqrt(e*e+f*f+d*d),h,k,l,n,m,p,q,r,s,v,w,C,B,x,z,y,A,D,F,I;if(Math.abs(g)&lt;H)return null;g=1/g;e*=g;f*=g;d*=g;h=Math.sin(c);k=Math.cos(c);l=1-k;c=b[0];g=b[1];n=b[2];m=b[3];p=b[4];q=b[5];r=b[6];s=b[7];v=b[8];w=b[9];C=b[10];B=b[11];x=e*e*l+k;z=f*e*l+d*h;y=d*e*l-f*h;A=e*f*l-d*h;D=f*f*l+k;F=d*f*l+e*h;I=e*d*l+f*h;e=f*d*l-e*h;f=d*d*l+k;a[0]=c*x+p*z+v*y;a[1]=g*x+q*z+w*y;a[2]=n*x+r*z+C*y;a[3]=m*x+s*z+B*y;a[4]=c*A+p*D+v*F;a[5]=g*A+q*D+w*F;a[6]=n*A+r*D+C*F;a[7]=m*A+s*D+B*F;a[8]=c*I+p*e+v*f;a[9]=g*I+q*e+ w*f;a[10]=n*I+r*e+C*f;a[11]=m*I+s*e+B*f;b!==a&amp;&amp;(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};A.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],g=b[6],h=b[7],k=b[8],l=b[9],n=b[10],m=b[11];b!==a&amp;&amp;(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+k*d;a[5]=f*c+l*d;a[6]=g*c+n*d;a[7]=h*c+m*d;a[8]=k*c-e*d;a[9]=l*c-f*d;a[10]=n*c-g*d;a[11]=m*c-h*d;return a};A.rotateY=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e= b[0],f=b[1],g=b[2],h=b[3],k=b[8],l=b[9],n=b[10],m=b[11];b!==a&amp;&amp;(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-k*d;a[1]=f*c-l*d;a[2]=g*c-n*d;a[3]=h*c-m*d;a[8]=e*d+k*c;a[9]=f*d+l*c;a[10]=g*d+n*c;a[11]=h*d+m*c;return a};A.rotateZ=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],k=b[4],l=b[5],n=b[6],m=b[7];b!==a&amp;&amp;(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+k*d; a[1]=f*c+l*d;a[2]=g*c+n*d;a[3]=h*c+m*d;a[4]=k*c-e*d;a[5]=l*c-f*d;a[6]=n*c-g*d;a[7]=m*c-h*d;return a};A.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,k=e+e,l=f+f;b=d*h;var n=d*k,d=d*l,m=e*k,e=e*l,f=f*l,h=g*h,k=g*k,g=g*l;a[0]=1-(m+f);a[1]=n+g;a[2]=d-k;a[3]=0;a[4]=n-g;a[5]=1-(b+f);a[6]=e+h;a[7]=0;a[8]=d+k;a[9]=e-h;a[10]=1-(b+m);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};A.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,k=e+e,c=c*g,l= d*g,d=d*h,n=e*g,m=e*h,e=e*k,g=f*g,h=f*h,f=f*k;a[0]=1-d-e;a[1]=l+f;a[2]=n-h;a[3]=0;a[4]=l-f;a[5]=1-c-e;a[6]=m+g;a[7]=0;a[8]=n+h;a[9]=m-g;a[10]=1-c-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};A.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),k=1/(e-d),l=1/(f-g);a[0]=2*f*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f*k;a[6]=0;a[7]=0;a[8]=(c+b)*h;a[9]=(e+d)*k;a[10]=(g+f)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=g*f*2*l;a[15]=0;return a};A.perspective=function(a,b,c,d,e){b=1/Math.tan(b/2);var f=1/(d-e);a[0]=b/c; a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(e+d)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*e*d*f;a[15]=0;return a};A.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),k=1/(d-e),l=1/(f-g);a[0]=-2*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+c)*h;a[13]=(e+d)*k;a[14]=(g+f)*l;a[15]=1;return a};A.lookAt=function(a,b,c,d){var e,f,g,h,k,l,n,m,p=b[0],q=b[1];b=b[2];g=d[0];h=d[1];f=d[2];n=c[0];d=c[1];e=c[2];if(Math.abs(p-n)&lt;H&amp;&amp;Math.abs(q-d)&lt;H&amp;&amp; Math.abs(b-e)&lt;H)return A.identity(a);c=p-n;d=q-d;n=b-e;m=1/Math.sqrt(c*c+d*d+n*n);c*=m;d*=m;n*=m;e=h*n-f*d;f=f*c-g*n;g=g*d-h*c;(m=Math.sqrt(e*e+f*f+g*g))?(m=1/m,e*=m,f*=m,g*=m):g=f=e=0;h=d*g-n*f;k=n*e-c*g;l=c*f-d*e;(m=Math.sqrt(h*h+k*k+l*l))?(m=1/m,h*=m,k*=m,l*=m):l=k=h=0;a[0]=e;a[1]=h;a[2]=c;a[3]=0;a[4]=f;a[5]=k;a[6]=d;a[7]=0;a[8]=g;a[9]=l;a[10]=n;a[11]=0;a[12]=-(e*p+f*q+g*b);a[13]=-(h*p+k*q+l*b);a[14]=-(c*p+d*q+n*b);a[15]=1;return a};A.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+ a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};A.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};"undefined"!==typeof y&amp;&amp;(y.mat4= A);var s={create:function(){var a=new v(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};s.rotationTo=function(){var a=q.create(),b=q.fromValues(1,0,0),c=q.fromValues(0,1,0);return function(d,e,f){var g=q.dot(e,f);if(-.999999>g)return q.cross(a,b,e),1E-6>q.length(a)&amp;&amp;q.cross(a,c,e),q.normalize(a,a),s.setAxisAngle(d,a,Math.PI),d;if(.999999&lt;g)return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d;q.cross(a,e,f);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=1+g;return s.normalize(d,d)}}();s.setAxes=function(){var a=D.create();return function(b, c,d,e){a[0]=d[0];a[3]=d[1];a[6]=d[2];a[1]=e[0];a[4]=e[1];a[7]=e[2];a[2]=-c[0];a[5]=-c[1];a[8]=-c[2];return s.normalize(b,s.fromMat3(b,a))}}();s.clone=p.clone;s.fromValues=p.fromValues;s.copy=p.copy;s.set=p.set;s.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};s.setAxisAngle=function(a,b,c){c*=.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a};s.add=p.add;s.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0],h=c[1],k=c[2];c=c[3];a[0]=d*c+ b*g+e*k-f*h;a[1]=e*c+b*h+f*g-d*k;a[2]=f*c+b*k+d*h-e*g;a[3]=b*c-d*g-e*h-f*k;return a};s.mul=s.multiply;s.scale=p.scale;s.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+b*g;a[1]=e*c+f*g;a[2]=f*c-e*g;a[3]=b*c-d*g;return a};s.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c-f*g;a[1]=e*c+b*g;a[2]=f*c+d*g;a[3]=b*c-e*g;return a};s.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g= Math.sin(c);c=Math.cos(c);a[0]=d*c+e*g;a[1]=e*c-d*g;a[2]=f*c+b*g;a[3]=b*c-f*g;return a};s.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];a[0]=c;a[1]=d;a[2]=e;a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e));return a};s.dot=p.dot;s.lerp=p.lerp;s.slerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];b=b[3];var h=c[0],k=c[1],l=c[2];c=c[3];var n,m,p;m=e*h+f*k+g*l+b*c;0>m&amp;&amp;(m=-m,h=-h,k=-k,l=-l,c=-c);1E-6&lt;1-m?(n=Math.acos(m),p=Math.sin(n),m=Math.sin((1-d)*n)/p,d=Math.sin(d*n)/p):m=1-d;a[0]=m*e+d*h;a[1]=m*f+d*k;a[2]= m*g+d*l;a[3]=m*b+d*c;return a};s.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,g=g?1/g:0;a[0]=-c*g;a[1]=-d*g;a[2]=-e*g;a[3]=f*g;return a};s.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};s.length=p.length;s.len=s.length;s.squaredLength=p.squaredLength;s.sqrLen=s.squaredLength;s.normalize=p.normalize;s.fromMat3=function(a,b){var c=b[0]+b[4]+b[8];if(0&lt;c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[7]-b[5])*c,a[1]=(b[2]-b[6])*c,a[2]=(b[3]-b[1])*c;else{var d= 0;b[4]>b[0]&amp;&amp;(d=1);b[8]>b[3*d+d]&amp;&amp;(d=2);var e=(d+1)%3,f=(d+2)%3,c=Math.sqrt(b[3*d+d]-b[3*e+e]-b[3*f+f]+1);a[d]=.5*c;c=.5/c;a[3]=(b[3*f+e]-b[3*e+f])*c;a[e]=(b[3*e+d]+b[3*d+e])*c;a[f]=(b[3*f+d]+b[3*d+f])*c}return a};s.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof y&amp;&amp;(y.quat=s)})(H)})(this);vec3.UNIT_X = vec3.fromValues(1, 0, 0);
vec3.UNIT_Y = vec3.fromValues(0, 1, 0);
vec3.UNIT_Z = vec3.fromValues(0, 0, 1);

vec3.hermite = function (out, a, b, c, d, t) {
  var factorTimes2 = t * t,
      factor1 = factorTimes2 * (2 * t - 3) + 1,
      factor2 = factorTimes2 * (t - 2) + t,
      factor3 = factorTimes2 * (t - 1),
      factor4 = factorTimes2 * (3 - 2 * t);
  
  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
  
  return out;
};

vec3.bezier = function (out, a, b, c, d, t) {
  var inverseFactor = 1 - t,
      inverseFactorTimesTwo = inverseFactor * inverseFactor,
      factorTimes2 = t * t,
      factor1 = inverseFactorTimesTwo * inverseFactor,
      factor2 = 3 * t * inverseFactorTimesTwo,
      factor3 = 3 * factorTimes2 * inverseFactor,
      factor4 = factorTimes2 * t;
  
  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
  
  return out;
};

mat4.fromRotationTranslationScale = function (out, q, v, s) {
    var x = q[0], y = q[1], z = q[2], w = q[3],
        x2 = x + x,
        y2 = y + y,
        z2 = z + z,

        xx = x * x2,
        xy = x * y2,
        xz = x * z2,
        yy = y * y2,
        yz = y * z2,
        zz = z * z2,
        wx = w * x2,
        wy = w * y2,
        wz = w * z2,
  
        sx = s[0],
        sy = s[1],
        sz = s[2];

    out[0] = (1 - (yy + zz)) * sx;
    out[1] = (xy + wz) * sx;
    out[2] = (xz - wy) * sx;
    out[3] = 0;
    out[4] = (xy - wz) * sy;
    out[5] = (1 - (xx + zz)) * sy;
    out[6] = (yz + wx) * sy;
    out[7] = 0;
    out[8] = (xz + wy) * sz;
    out[9] = (yz - wx) * sz;
    out[10] = (1 - (xx + yy)) * sz;
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    
    return out;
};

mat4.fromRotationTranslationScaleOrigin = function (out, q, v, s, o) {
  var x = q[0], y = q[1], z = q[2], w = q[3],
      x2 = x + x,
      y2 = y + y,
      z2 = z + z,

      xx = x * x2,
      xy = x * y2,
      xz = x * z2,
      yy = y * y2,
      yz = y * z2,
      zz = z * z2,
      wx = w * x2,
      wy = w * y2,
      wz = w * z2,
      
      sx = s[0],
      sy = s[1],
      sz = s[2],

      ox = o[0],
      oy = o[1],
      oz = o[2];
      
  out[0] = (1 - (yy + zz)) * sx;
  out[1] = (xy + wz) * sx;
  out[2] = (xz - wy) * sx;
  out[3] = 0;
  out[4] = (xy - wz) * sy;
  out[5] = (1 - (xx + zz)) * sy;
  out[6] = (yz + wx) * sy;
  out[7] = 0;
  out[8] = (xz + wy) * sz;
  out[9] = (yz - wx) * sz;
  out[10] = (1 - (xx + yy)) * sz;
  out[11] = 0;
  out[12] = v[0] + ox - (out[0] * ox + out[4] * oy + out[8] * oz);
  out[13] = v[1] + oy - (out[1] * ox + out[5] * oy + out[9] * oz);
  out[14] = v[2] + oz - (out[2] * ox + out[6] * oy + out[10] * oz);
  out[15] = 1;
        
  return out;
};

mat4.toRotationMat4 = (function () {
  var quadrent = mat3.create();
  
  return function (out, m) {
    mat3.fromMat4(quadrent, m);
    mat3.invert(quadrent, quadrent);
    
    out[0] = quadrent[0];
    out[1] = quadrent[1];
    out[2] = quadrent[2];
    out[3] = 1;
    out[4] = quadrent[3];
    out[5] = quadrent[4];
    out[6] = quadrent[5];
    out[7] = 1;
    out[8] = quadrent[6];
    out[9] = quadrent[7];
    out[10] = quadrent[8];
    out[11] = 1;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    
    return out;
  };
}());

quat.sqlerp = (function () {
  var temp1 = quat.create();
  var temp2 = quat.create();
  
  return function (out, a, b, c, d, t) {
    quat.slerp(temp1, a, d, t);
    quat.slerp(temp2, b, c, t);
    quat.slerp(out, temp1, temp2, 2 * t * (1 - t));
    
    return out;
  };
}());

mat4.decomposeScale = function (out, m) {
  var m0 = m[0], m1 = m[1], m2 = m[2],
        m4 = m[4], m5 = m[5], m6 = m[6],
        m8 = m[8], m9 = m[9], m10 = m[10];
  
  out[0] = Math.sqrt(m0*m0 + m1*m1 + m2*m2);
  out[1] = Math.sqrt(m4*m4 + m5*m5 + m6*m6);
  out[2] = Math.sqrt(m8*m8 + m9*m9 + m10*m10);
  
  return out;
};Math.TO_RAD = Math.PI / 180;
Math.TO_DEG = 180 / Math.PI;

/**
 * Convert from degrees to radians.
 *
 * @param {number} degrees
 * @returns {number} Radians.
 */
Math.toRad = function (degrees) {
  return degrees * Math.TO_RAD;
};

/**
 * Convert from radians to degrees.
 *
 * @param {number} radians
 * @returns {number} Degrees.
 */
Math.toDeg = function (radians) {
  return radians * Math.TO_DEG;
};

/**
 * Convert an array of numbers from degrees to radians.
 *
 * @param {number} degrees
 * @returns {number} Radians.
 */
Array.toRad = function (degrees) {
  var i,
        l,
        arr = [];
  
  for (i = 0, l = degrees.length; i &lt; l; i++) {
    arr[i] = degrees[i] * Math.TO_RAD;
  }
  
  return arr;
};

/**
 * Convert an array of numbers from radians to degrees.
 *
 * @param {number} radians
 * @returns {number} Degrees.
 */
Array.toDeg = function (radians) {
  var i,
        l,
        arr = [];
  
  for (i = 0, l = radians.length; i &lt; l; i++) {
    arr[i] = radians[i] * Math.TO_DEG;
  }
  
  return arr;
};

/**
 * Gets a random number in the given range.
 *
 * @param {number} a
 * @param {number} b
 * @returns {number} A random number in [a, b].
 */
Math.randomRange = function (a, b) {
  return a + Math.random() * (b - a);
};

/**
 * Sets the float precision of a number.
 *
 * @param {number} number
 * @param {number} decimals The number of decimals to keep.
 * @returns {number} New number.
 */
Math.setFloatPrecision = function (number, decimals) {
  var multiplier = Math.pow(10, decimals);
  
  return Math.round(number * multiplier) / multiplier;
};

/**
 * Sets the float precision of an array of numbers.
 *
 * @param {array} array
 * @param {number} decimals The number of decimals to keep.
 * @returns {number} Array of new numbers.
 */
Array.setFloatPrecision = function (array, decimals) {
  var multiplier = Math.pow(10, decimals),
        i,
        l,
        arr = [];
  
  for (i = 0, l = array.length; i &lt; l; i++) {
    arr[i] = Math.round(array[i] * multiplier) / multiplier;
  }
  
  return arr;
};

/**
 * Clamp a number in a range.
 *
 * @param {number} x
 * @param {number} minVal
 * @param {number} maxVal
 * @returns {number} Clamped number.
 */
Math.clamp = function (x, minVal, maxVal) {
  return Math.min(Math.max(x, minVal), maxVal);
};

/**
 * Linear interpolation between to numbers.
 *
 * @param {number} a First number.
 * @param {number} b Second number.
 * @param {number} t Factor.
 * @returns {number} Interpolated value.
 */
Math.lerp = function (a, b, t) {
  return a + t * (b - a);
};

/**
 * Hermite interpolation between to numbers.
 *
 * @param {number} a First number.
 * @param {number} b First control point.
 * @param {number} c Second control point.
 * @param {number} d Second number.
 * @param {number} t Factor.
 * @returns {number} Interpolated value.
 */
Math.hermite = function (a, b, c, d, t) {
  var factorTimes2 = t * t,
        factor1 = factorTimes2 * (2 * t - 3) + 1,
        factor2 = factorTimes2 * (t - 2) + t,
        factor3 = factorTimes2 * (t - 1),
        factor4 = factorTimes2 * (3 - 2 * t);
  
  return (a * factor1) + (b * factor2) + (c * factor3) + (d * factor4);
};

/**
 * Bezier interpolation between to numbers.
 *
 * @param {number} a First number.
 * @param {number} b First control point.
 * @param {number} c Second control point.
 * @param {number} d Second number.
 * @param {number} t Factor.
 * @returns {number} Interpolated value.
 */
Math.bezier = function (a, b, c, d, t) {
  var invt = 1 - t,
        factorTimes2 = t * t,
        inverseFactorTimesTwo = invt * invt,
        factor1 = inverseFactorTimesTwo * invt,
        factor2 = 3 * t * inverseFactorTimesTwo,
        factor3 = 3 * factorTimes2 * invt,
        factor4 = factorTimes2 * t;
  
  return (a * factor1) + (b * factor2) + (c * factor3) + (d * factor4);
};

/**
 * Gets the sign of a number.
 *
 * @param {number} x
 * @returns {number} The sign.
 */
Math.sign = function (x) {
  return x === 0 ? 0 : (x &lt; 0 ? -1 : 1);
};

/**
 * Copies the sign of one number onto another.
 *
 * @param {number} x Destination.
 * @param {number} y Source.
 * @returns {number} Returns the destination with the source's sign.
 */
Math.copysign = function (x, y) {
  var signy = sign(y),
        signx;
  
  if (signy === 0) {
    return 0;
  }
  
  signx = sign(x);
  
  if (signx !== signy) {
    return -x;
  }
  
  return x;
};

/**
 * Gets the closest power of two bigger than the given number.
 *
 * @param {number} x
 * @returns {number} A power of two number.
 */
Math.powerOfTwo = function (x) {
  x--;
  x |= x >> 1; 
  x |= x >> 2; 
  x |= x >> 4; 
  x |= x >> 8; 
  x |= x >> 16; 
  x++;
  
  return x;
};var interpolator = (function () {
  var zeroV = vec3.create();
  var zeroQ = quat.create();
    
  function scalar(a, b, c, d, t, type) {
    if (type === 0) {
      return a;
    } else if (type === 1) {
      return Math.lerp(a, d, t);
    } else if (type === 2) {
      return Math.hermite(a, b, c, d, t);
    } else if (type === 3) {
      return Math.bezier(a, b, c, d, t);
    }
    
    return 0;
  }
  
  function vector(out, a, b, c, d, t, type) {
    if (type === 0) {
      return a;
    } else if (type === 1) {
      return vec3.lerp(out, a, d, t);
    } else if (type === 2) {
      return vec3.hermite(out, a, b, c, d, t);
    } else if (type === 3) {
      return vec3.bezier(out, a, b, c, d, t);
    }
    
    return zeroV;
	}
  
  function quaternion(out, a, b, c, d, t, type) {
    if (type === 0) {
      return a;
    } else if (type === 1) {
      return quat.slerp(out, a, d, t);
    } else if (type === 2 || type === 3) {
      return quat.sqlerp(out, a, b, c, d, t);
    }
    
    return zeroQ;
  }
  
  return function (out, a, b, c, d, t, type) {
    var length = a.length;
    
    if (length === 3) {
      return vector(out, a, b, c, d, t, type);
    } else if (length === 4) {
      return quaternion(out, a, b, c, d, t, type);
    } else {
      return scalar(a, b, c, d, t, type);
    }
  }
}());</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="AsyncModel.html">AsyncModel</a></li><li><a href="AsyncModelInstance.html">AsyncModelInstance</a></li><li><a href="BaseModel.html">BaseModel</a></li><li><a href="BaseModelInstance.html">BaseModelInstance</a></li><li><a href="BaseNode.html">BaseNode</a></li><li><a href="BinaryReader.html">BinaryReader</a></li><li><a href="BLPTexture.html">BLPTexture</a></li><li><a href="Camera.html">Camera</a></li><li><a href="DDSTexture.html">DDSTexture</a></li><li><a href="GL.html">GL</a></li><li><a href="GL.Cube.html">Cube</a></li><li><a href="GL.Cylinder.html">Cylinder</a></li><li><a href="GL.NativeTexture.html">NativeTexture</a></li><li><a href="GL.Rect.html">Rect</a></li><li><a href="GL.Shader.html">Shader</a></li><li><a href="GL.ShaderUnit.html">ShaderUnit</a></li><li><a href="GL.Sphere.html">Sphere</a></li><li><a href="ModelViewer.html">ModelViewer</a></li><li><a href="Node.html">Node</a></li><li><a href="Texture.html">Texture</a></li><li><a href="TGATexture.html">TGATexture</a></li></ul><h3>Mixins</h3><ul><li><a href="Async.html">Async</a></li><li><a href="Spatial.html">Spatial</a></li></ul><h3>Global</h3><ul><li><a href="global.html#bytesToString">bytesToString</a></li><li><a href="global.html#decodeFloat2">decodeFloat2</a></li><li><a href="global.html#decodeFloat3">decodeFloat3</a></li><li><a href="global.html#encodeFloat2">encodeFloat2</a></li><li><a href="global.html#encodeFloat3">encodeFloat3</a></li><li><a href="global.html#extend">extend</a></li><li><a href="global.html#getDom">getDom</a></li><li><a href="global.html#getFile">getFile</a></li><li><a href="global.html#getFileExtension">getFileExtension</a></li><li><a href="global.html#getFileName">getFileName</a></li><li><a href="global.html#getUrlVariables">getUrlVariables</a></li><li><a href="global.html#mixin">mixin</a></li><li><a href="global.html#peek">peek</a></li><li><a href="global.html#read">read</a></li><li><a href="global.html#readFloat32">readFloat32</a></li><li><a href="global.html#readFloat32Array">readFloat32Array</a></li><li><a href="global.html#readFloat32Matrix">readFloat32Matrix</a></li><li><a href="global.html#readFloat64">readFloat64</a></li><li><a href="global.html#readFloat64Array">readFloat64Array</a></li><li><a href="global.html#readFloat64Matrix">readFloat64Matrix</a></li><li><a href="global.html#readInt8">readInt8</a></li><li><a href="global.html#readInt8Array">readInt8Array</a></li><li><a href="global.html#readInt8Matrix">readInt8Matrix</a></li><li><a href="global.html#readInt16">readInt16</a></li><li><a href="global.html#readInt16Array">readInt16Array</a></li><li><a href="global.html#readInt16Matrix">readInt16Matrix</a></li><li><a href="global.html#readInt32">readInt32</a></li><li><a href="global.html#readInt32Array">readInt32Array</a></li><li><a href="global.html#readInt32Matrix">readInt32Matrix</a></li><li><a href="global.html#readMatrix">readMatrix</a></li><li><a href="global.html#readUint8">readUint8</a></li><li><a href="global.html#readUint8Array">readUint8Array</a></li><li><a href="global.html#readUint8Matrix">readUint8Matrix</a></li><li><a href="global.html#readUint16">readUint16</a></li><li><a href="global.html#readUint16Array">readUint16Array</a></li><li><a href="global.html#readUint16Matrix">readUint16Matrix</a></li><li><a href="global.html#readUint32">readUint32</a></li><li><a href="global.html#readUint32Array">readUint32Array</a></li><li><a href="global.html#readUint32Matrix">readUint32Matrix</a></li><li><a href="global.html#readVector2">readVector2</a></li><li><a href="global.html#readVector3">readVector3</a></li><li><a href="global.html#readVector4">readVector4</a></li><li><a href="global.html#remaining">remaining</a></li><li><a href="global.html#seek">seek</a></li><li><a href="global.html#skip">skip</a></li><li><a href="global.html#tell">tell</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha9</a> on Thu Oct 09 2014 23:21:20 GMT+0300 (Jerusalem Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
